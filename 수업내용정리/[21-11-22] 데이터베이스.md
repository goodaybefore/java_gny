### 데이터베이스



#### 요구사항

1. 요구사항 명세서

   - 개발할 내용을 세부적으로 작성한 문서

     - ex) 학생 관리 프로그램 개발 시 '~한 기능을 만들겁니다' 하고 만드는거랑 비슷

     - 개발 기간을 산정
     - 투입 인원을 결정
     - 금액 산정

   - 구현 가능 여부에 대해 논의(단가따지기)

   - 프로그램 일정 계획 수립

   - 

   - 요구사항ID, 구분, 서비스(요구사항명), 기능(요구사항내용), 진행사항, 우선순위 등을 기술
   - 일차적으로 사용자 중심으로 구성 (사용자 사용 페이지/관리자 사용페이지 구분)
   - 프로젝트 전체 규모를 파악
   - 

2. 스토리보드

   - 화면 누르면 뭐가 나올지, 그 화면을 어떻게 구성할건지
   - 대략적인 화면 구성
   - 요소 선택 시 바뀌는 화면
   - 실제로 모든 화면의 스토리보드를 만들려면 시간이 오래걸림 => 

3. 디자인 시안(디자인 팀)

4. 개발 진행행

   - 프론트
     - 화면 구성
       - 디자인팀 구현을 해서 넘김
       - 퍼블리셔(프론트엔드를 전문으로 하는 개발자)가 구현을 해서 넘김
   - 백
     - 요구사항 명세를 기준으로 ERD 설계
       - ERD : 말로서 되어있는 요구분석사항을 그림으로 그려내어 그 관계를 도출하는 것
       - E-R 다이어그램 : Entitiy의 Relationship
     - 그 후 데이터베이스를 구축
     - 백엔드 개발





#### 좋은 요구사항 명세서의 특징

- 요구사항 명세서를 읽은 작업자가 이해하기 쉬워야 함
- 명확하게 작성한다
- 하나의 요구사항에 여러 요구사항을 작성하지 않는다
- 중요한 요구사항은 표시하되, 남발하지 않는다
- 애매한 단어를 사용하지 않는다
  - ~기능이 있으면 좋겠다 => ~기능이 필요
- 동일한 용어를 사용
  - 댓글로 표기하면 끝까지 댓글.
  - 댓글, 코멘트, 덧글과 같이 의미가 같은 용어를 같이 사용하지 않음



##### 다음 요구사항 명세서를 작성하세요

- 대학교에서 수강신청만(성적관리X) 관리하는 사이트를 구착하려한다. 해당 사이트를 구축하기위한 요구사항 명세서를 작성하세요.









## 데이터베이스

- 데이터
  -  값
- 정보
  -  데이터를 처리하여 추출한 의미있는 값
- 데이터베이스
  -  값들을 모아놓은 곳, 데이터의 집합



#### ERD

- Entity Relationsip Diagram
- 데이터들의 관계를 모아놓은 것
- 정보를 데이터베이스로 관리하기위한 과정



- 사각형 : Entity 개체
- 마름모 : Relationship 관계
- 타원 : Atribute 속성





수강신청 요구사항 명세서에 따른 ERD

#### 수강신청하는 사이트를 위한 ERD

- 학생은 아이디 비번 이름 주번 학과 학생구분(학 석 박사)로 이루어져있다
  - 개체 : 학생
  - 속성 : 아디 비번 이름 주번 학과 학생구분
  - 학생이라는 개체 안에 속성들이 존재(A는 B이다)
- 교수은 아이디 비번 이름 주번 담당학과 석사졸업학교 박사졸업학교(선택)
  - 담당학과가 몇개인걸로 할걸지
  - 개체 : 교수
  - 속성 : 아이디 비번 이름 주번 담당학과 학사졸업학교 석사졸업학교

- 과목은 과목명 과목코드 과목교수 과목일정 학점 시수 정원 이수구분 분반으로 구성되어있다
  - 개체 : 과목
  - 과목명 과목코드 과목교수 과목일정 학점 시수 정원 이수구분 분반
- 교수는 과목을 강의한다
- 학생은 과목을 수강한다

- 수강 이라는 Relationship에서
  -  한 명의 학생은 여러 과목을 수강할 수 있다 : 1:N 관계
  - 한 과목에 여러학생이 수강할 수 있다 1:M 관계
  - => 과목과 학생사이의 관계는 N:M 관계

- 강의
  - 한 명의 교수는 한 과목을 수강할 수 있다. (교수 : 과목 = 1 : 1)
  - 한 과목에는 한 명의 교수만 강의할 수 있다. (과목 : 강의 = 1:1)



​	＊ 속성은 내가 어떻게 작성하느냐에 따라서 관계가 달라질 수 있음







## DDL(Data Definition Language)

- 데이터 정의어
- 데이터베이스/스키마, 테이블을 생성, 수정, 삭제 초기화할 때 사용
- SQL에 따라 데이터베이스와 스키마를 다르게 취급할 수 있지만 MySQL에서는 데이터베이스와 스키마를 같은 것으로 이해하면 됨.
- 데이터베이스
  - 테이블의 집합
  - ERD에서 객체, 관계 => 테이블



### 데이터베이스

- CREATE

  - DB,  TABLE 생성

  - ```mysql
    CREATE schema 스키마명;
    CREATE database DB명;
    ```

- DROP

  - DB를 삭제

  - ```mysql
    DROP schema 스키마명;
    DROP database DB명;
    ```



### 테이블 DDL

- 테이블을 관리하려면 DB를 선택 후 작업해야함

- CREATE

  - 테이블 생성

  - ```mysql
    CREATE TABLE 테이블명(
    	컬럼명1	데이터타입 [DEFAULT 값 NOT NULL],//[]값은 생략가능
        컬럼명2	데이터타입 [DEFAULT 값],
        컬럼명3	데이터타입 [DEFAULT 값],
    	constraint 제약조건명 primary key(컬럼명),
    	constraint 제약조건명 foreign key(컬럼명) references 상대테이블(기본키)
    )
    --제약조건명은 pk_이름 으로 많이 사용
    	외부키는 fk_이름
    	
    ```

- EXPLAIN ( DESCRIBE랑 뭐가다르지 )

- DROP

  - 테이블을 삭제

  - ```mysql
    DROP TABLE 테이블명;
    ```

- ALTER

  - 테이블 수정 

  - ```mysql
     -- 속성 추가
    ALTER TABLE 테이블명 ADD 컬럼명 데이터타입;
     -- 속성 변경
    ALTER TABLE 테이블명 MODIFY 컬럼명 데이터타입 [DEFAULT 값 NOT NULL];
     -- 속성명 변경
    ALTER TABLE 테이블명 CHANGE 기존컬럼명 새컬럼명 [DEFAULT 값 NOT NULL];
     -- 속성 삭제
    ALTER TABLE 테이블명 DROP 컬럼명;
    -- 기본키 등록
    ALTER TABLE 테이블명 ADD CONSTRAINT 제약조건명(예: pk_num1) PRIMARY KEY(컬럼명);
    -- 기본키 삭제
    ALTER TABLE 테이블명 DROP PRIMARY KEY; -- PRI 만 삭제됨. 컬럼이 삭제되지 X
    
    ```

- TRUNCATE

  - 테이블 내에 데이터들 초기화

  - 개발 서버에서 테스트 후 실 서버로 배포 전에 테스트용으로 올렸던 데이터를 초기화할 경우 사용한다.

  - ```mysql
    TRUNCATE 테이블명;
    ```









## 키(KEY)



### 슈퍼키(Super Key)

- 테이블의 행을 고유하게 식별할 수 있는 속성 또는 속성의 집합
- 대학교에서 학생을 고유하게 구분할 수 있는 속성 - 하나일수도, 여러개가 묶여있을 수도 있음
  - 학번
  - 학번, 이름
  - 주민번호
  - 학번, 주민번호
  - 학번, 주민번호, 이름



### 후보키

- 슈퍼키 중에서 불필요한 속성들을 제거한 속성 또는 속성의 집합
- 대학교에서 학생을 고유하게 구분할 수 있는 속성
  - 학번
  - 주민번호
  - => 이름은 굳이 안 붙여도 구분 가능



### 기본키(Primary Key)

- 테이블의 식별자로 이용하기에 가장 적합한 속성으로 선정된 <span style="color:red">후보키</span>
- 대학교에서 학생을 고유하게 구별할 수 있는 속성
  - 학번



### 대체키

- 후보키 중에서 기본키로 선정되지 않은 키
- 대학교에서 학생을 고유하게 구별할 수 있는 속성
  - 주민번호





### 외래키(Foregin key)

- 다른 테이블의 행을 식별할 수 있는 키







```mysql
-- 테이블이 있으면 삭제하겠다 라는 말(CREATE랑 같이 써주면 좋음)
DROP TABLE IF EXISTS student;

```

